# 배열 렌더링하기
```JavaScript
const users = [
  {
    id: 1,
    username: 'velopert',
    email: 'public.velopert@gmail.com'
  },
  {
    id: 2,
    username: 'tester',
    email: 'tester@example.com'
  },
  {
    id: 3,
    username: 'liz',
    email: 'liz@example.com'
  }
];
```
위와 같은 배열을 렌더링 하는 방법으로는 여러가지가 있다.  
- 기본적이지만 비효율적인 방법  


**UserList.js**
```JavaScript
import React from 'react';

function UserList() {
  const users = [
    {
      id: 1,
      username: 'velopert',
      email: 'public.velopert@gmail.com'
    },
    {
      id: 2,
      username: 'tester',
      email: 'tester@example.com'
    },
    {
      id: 3,
      username: 'liz',
      email: 'liz@example.com'
    }
  ];
  return (  //일일이 하나씩 코드를 넣어준다.
    <div>
      <div>
        <b>{users[0].username}</b> <span>({users[0].email})</span>
      </div>
      <div>
        <b>{users[1].username}</b> <span>({users[1].email})</span>
      </div>
      <div>
        <b>{users[2].username}</b> <span>({users[1].email})</span>
      </div>
    </div>
  );
}

export default UserList;
```
- 컴포넌트를 재사용 할 수 있도록 새로 만들어줌.  


**UserList.js 수정**
```JavaScript
import React from 'react';

function User({ user }) {
  return (
    <div>
      <b>{user.username}</b> <span>({user.email})</span>
    </div>
  );
}

function UserList() {
  const users = [
    {
      id: 1,
      username: 'velopert',
      email: 'public.velopert@gmail.com'
    },
    {
      id: 2,
      username: 'tester',
      email: 'tester@example.com'
    },
    {
      id: 3,
      username: 'liz',
      email: 'liz@example.com'
    }
  ];

  return (  //컴포넌트를 재사용하여 보다 간단하게 표현
    <div>
      <User user={users[0]} />
      <User user={users[1]} />
      <User user={users[2]} />
    </div>
  );
}

export default UserList;
```
- 위의 방법들은 배열이 고정적이라면 상관없지만 배열이 동적이라면 배열의 인덱스를 하나하나 조회하면서 렌더링할 수는 없다. => map() 함수 사용
+) [map()함수](https://learnjs.vlpt.us/basics/09-array-functions.html#map)  
`map()`함수는 배열안에 있는 각 원소를 변환하여 새로운 배열을 만들어준다.  


**Map() 함수를 이용한 UserList.js**
```JavaScript
import React from 'react';

function User({ user }) {
  return (
    <div>
      <b>{user.username}</b> <span>({user.email})</span>
    </div>
  );
}

function UserList() {
  const users = [
    {
      id: 1,
      username: 'velopert',
      email: 'public.velopert@gmail.com'
    },
    {
      id: 2,
      username: 'tester',
      email: 'tester@example.com'
    },
    {
      id: 3,
      username: 'liz',
      email: 'liz@example.com'
    }
  ];

  return (
    <div>
      {users.map(user => (        {/*map() 함수를 사용해 동적인 배열도 렌더링 가능*/}
        <User user={user} />
      ))}
    </div>
  );
}

export default UserList;
```

*중요사항*  
리액트에서 배열을 렌더링 할 때는 `key`라는 props를 설정해야 한다.  
배열 안의 원소가 가지고 있는 고유한 값이 없다면 콜백함수의 두번째 파라미터 `index`를 `key`로 사용한다.  
***`key`설정을 하지 않으면 경고메세지가 뜬다***

## key의 존재유뮤에 따른 업데이트 방식
- key가 없다면?
  
  ```JavaScript
  const array = [a,b,c,d];
  ```
  b와 c 사이에 z를 삽입할때 기존의 c가 z로, 기존의 d가 c로, 맨 마지막에 d가 삽입  
  a를 제거할때 기존의 a가 b로, b는 z로, z는 c로, c는 d로, 맨 마지막에  d가 제거  
  =>비효율적  

- key가 있다면?  
  수정되지 않는 기존의 값은 그대로 두고 원하는 곳에 내용을 삽입하거나 삭제.



## 질문
배열 안의 원소가 가지고 있는 고유한 값이 없다면 어떤 것을 `key`로 사용해야할까?

## 답
map() 함수 사용할때 설정하는 콜백함수의 두번째 파라미터 `index`를 `key`로 사용한다.  
```JavaScript
<div>
  {users.map((user, index) => (
    <User user={user} key={index} />
  ))}
</div>
```