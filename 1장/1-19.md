# 1-19

## React.memo ë¥¼ ì‚¬ìš©í•œ ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§ ë°©ì§€

`React.momo` : ì»´í¬ë„ŒíŠ¸ì˜ `props`ê°€ ë°”ë€Œì§€ ì•Šì•˜ë‹¤ë©´, ë¦¬ë Œë”ë§ì„ ë°©ì§€í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ì˜ ë¦¬ë Œë”ë§ ì„±ëŠ¥ ìµœì í™”ë¥¼ í•´ì¤„ ìˆ˜ ìˆë‹¤.

CreateUser.js

```jsx
import React from 'react';

const CreateUser = ({ username, email, onChange, onCreate }) => {
  return (
    <div>
      <input
        name="username"
        placeholder="ê³„ì •ëª…"
        onChange={onChange}
        value={username}
      />
      <input
        name="email"
        placeholder="ì´ë©”ì¼"
        onChange={onChange}
        value={email}
      />
      <button onClick={onCreate}>ë“±ë¡</button>
    </div>
  );
};

export default React.memo(CreateUser);
```

UserList.js

```jsx
import React from 'react';

const User = React.memo(function User({ user, onRemove, onToggle }) {
  return (
    <div>
      <b
        style={{
          cursor: 'pointer',
          color: user.active ? 'green' : 'black'
        }}
        onClick={() => onToggle(user.id)}
      >
        {user.username}
      </b>
      &nbsp;
      <span>({user.email})</span>
      <button onClick={() => onRemove(user.id)}>ì‚­ì œ</button>
    </div>
  );
});

function UserList({ users, onRemove, onToggle }) {
  return (
    <div>
      {users.map(user => (
        <User
          user={user}
          key={user.id}
          onRemove={onRemove}
          onToggle={onToggle}
        />
      ))}
    </div>
  );
}

export default React.memo(UserList);
```

ì´ë ‡ê²Œ React.memoë¡œ ê°ì‹¸ì£¼ë©´ inputì„ ìˆ˜ì •í•  ë•Œ í•˜ë‹¨ì˜ UserListê°€ ë¦¬ë Œë”ë§ ë˜ì§€ ì•ŠëŠ”ë‹¤.

â—ê·¸ëŸ°ë° User ì¤‘ í•˜ë‚˜ë¼ë„ ìˆ˜ì •í•˜ë©´ ëª¨ë“  Userë“¤ì´ ë¦¬ë Œë”ë§ ë˜ê³ , CreateUserë„ ë¦¬ë Œë”ë§ ëœë‹¤.

â‡’ users ë°°ì—´ì´ ë°”ë€” ë•Œë§ˆë‹¤ `onCreate`, `onRemove`, `onToggle` ì´ ìƒˆë¡œ ë§Œë“¤ì–´ì§€ê¸° ë•Œë¬¸ì´ë‹¤.

    `deps` ì— `users` ê°€ ë“¤ì–´ê°€ ìˆê¸° ë•Œë¬¸ì— ë°°ì—´ì´ ë°”ë€” ë•Œë§ˆë‹¤ í•¨ìˆ˜ë“¤ì´ ìƒˆë¡œ ë§Œë“¤ì–´ì§€ëŠ”ê±´ ë‹¹ì—°.

ğŸ’¡ì´ê²ƒë„ ìµœì í™”í•˜ê³ ì‹¶ë‹¤ë©´?

`deps` ì—ì„œ `users` ë¥¼ ì§€ìš°ê³ , í•¨ìˆ˜ë“¤ì—ì„œ í˜„ì¬ `useState`ë¡œ ê´€ë¦¬í•˜ëŠ” `users`ë¥¼ ì°¸ì¡°í•˜ì§€ ì•Šê²Œ í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤. â‡’ `useState` ì˜ í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ ê°€ëŠ¥!

í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ë¥¼ í•˜ê²Œ ë˜ë©´ `setUsers` ì— ë“±ë¡í•˜ëŠ” ì½œë°±í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ì—ì„œ ìµœì‹  `users` ë¥¼ ì°¸ì¡° í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— `deps` ì— `users` ë¥¼ ë„£ì§€ ì•Šì•„ë„ ëœë‹¤.

ì½œë°± ì¸¡ì—ì„œëŠ” `deps`ì•ˆì— ë°”ë€ stateë“¤ì´ ë“¤ì–´ìˆì§€ ì•Šì•„ì„œ ë¦¬ë Œë”ë§ì„ ì§„í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤.

onCreate í•¨ìˆ˜

```jsx
const onCreate = useCallback(() => {
    const user = {
      id: nextId.current,
      username,
      email
    };
    setUsers(users => users.concat(user));

    setInputs({
      username: '',
      email: ''
    });
    nextId.current += 1;
  }, [username, email]);
```

ì´ë ‡ê²Œê¹Œì§€ í•´ì£¼ë©´ ìµœì í™” ë!

- `useCallback`, `useMemo`, `React.memo` ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ì„±ëŠ¥ì„ ì‹¤ì œë¡œ ê°œì„ í•  ìˆ˜ ìˆëŠ” ìƒí™©ì—ì„œë§Œ ì‚¬ìš©. (ex. `button` ì— `onClick` ìœ¼ë¡œ ì„¤ì •í•´ì¤€ í•¨ìˆ˜ë“¤ì€ ë¦¬ë Œë”ë§ì„ ë§‰ì„ ìˆ˜ ì—†ë‹¤.)
- ë Œë”ë§ ìµœì í™” í•˜ì§€ ì•Šì„ ì»´í¬ë„ŒíŠ¸ì— React.memoë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë¶ˆí•„ìš”í•œ ì¶”ê°€í–‰ë™ì´ë‹¤.

- ë°°ì—´ì´ ë°”ë€”ë•Œë§ˆë‹¤ í•¨ìˆ˜ê°€ ìƒˆë¡œ ë§Œë“¤ì–´ì§€ëŠ” ê²ƒì„ ìµœì í™” í•˜ê¸° ìœ„í•œ ë°©ë²•ì€?

    í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ ì½œë°±í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ì—ì„œ ìµœì‹  usersë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— depsì— usersë¥¼ ë„£ì§€ ì•Šì•„ë„ ëœë‹¤.